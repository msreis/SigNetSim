{#   _layout/base.html : This is the top template 							  #}

{#   Copyright (C) 2016 Vincent Noel (vincent.noel@butantan.gov.br) 		  #}

{#   This program is free software: you can redistribute it and/or modify     #}
{#   it under the terms of the GNU Affero General Public License as published #}
{#   by the Free Software Foundation, either version 3 of the License, or     #}
{#   (at your option) any later version. 									  #}

{#   This program is distributed in the hope that it will be useful, 		  #}
{#   but WITHOUT ANY WARRANTY; without even the implied warranty of 		  #}
{#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the 			  #}
{#   GNU Affero General Public License for more details.					  #}

{#   You should have received a copy of the GNU Affero General Public License #}
{#   along with this program. If not, see <http://www.gnu.org/licenses/>. 	  #}
{% load static from staticfiles %}

<!DOCTYPE html>
<html lang="en">
  <head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
	<meta name="description" content="">
	<meta name="author" content="">
	<title>Install | SigNetSim</title>
	<!-- Bootstrap core CSS -->
	<link href="{{ request.META.PATH_INFO }}{% static "bootstrap/dist/css/bootstrap.min.css" %}" rel="stylesheet">
	<!-- Custom styles for this template -->
	{% block css %}{% endblock css %}
	<script src="{{ request.META.PATH_INFO }}{% static "jquery/dist/jquery.min.js" %}"></script>
	<script>
				{% include 'commons/commons.js' %}
	</script>
	{% block header %}{% endblock header %}
  </head>

  <body style="padding-top: 60px">
		<nav class="navbar navbar-inverse navbar-fixed-top" id="navbar-fixed-top">
			<div class="container-fluid">
				<div class="navbar-header align-center">
					<a class="navbar-brand align-center">SigNetSim</a>
				</div>
			</div>
		</nav>
		{% if install_done == False %}
		<div class="container-fluid">
			<h4>Installation</h4>
			<hr><br>
			<div class="container-fluid">
     		<form method="post">
				 {% csrf_token %}

					<table class="table table-striped">
						<thead>
							<tr class="row">
								<th class="col-xs-12">Admin username</th>
							</tr>
						</thead>
						<tbody>
							<tr class="row">
								<td class="col-xs-12">
									<input type="text" class="form-control input-sm"
												 placeholder="Input the admin username"
												 name="admin_username" value=""
									>
								</td>
							</tr>
						</tbody>
					</table>
					<table class="table table-striped">
						<thead>
							<tr class="row">
								<th class="col-xs-12">Admin email</th>
							</tr>
						</thead>
						<tbody>
							<tr class="row">
								<td class="col-xs-12">
									<input type="text" class="form-control input-sm"
												 placeholder="Input the email of the admin"
												 name="admin_email" value=""
									>
								</td>
							</tr>
						</tbody>
					</table>
					<table class="table table-striped">
						<thead>
							<tr class="row">
								<th class="col-xs-12">Admin password</th>
							</tr>
						</thead>
						<tbody>
							<tr class="row">
								<td class="col-xs-12">
									<input type="password" class="form-control input-sm"
												 placeholder="Input the admin password"
												 name="admin_password1" value=""
									>
								</td>
							</tr>
						</tbody>
					</table>
					<table class="table table-striped">
						<thead>
							<tr class="row">
								<th class="col-xs-12">Password confirmation</th>
							</tr>
						</thead>
						<tbody>
							<tr class="row">
								<td class="col-xs-12">
									<input type="password" class="form-control input-sm"
												 placeholder="Confirm the admin password"
												 name="admin_password2" value=""
									>
								</td>
							</tr>
						</tbody>
					</table>
					<div class="form-group pull-right">
						<input type="submit" class="btn btn-primary btn-primary" value="Create">
					</div>
				</form>
			</div>
		</div>
		{% else %}
		<div class="container-fluid">
			<h4>Please wait while the installation finishes...</h4>
		<script>

			setInterval(()=>{
				ajax_call(
					"POST", "{% url 'get_install_status' %}", {},
					(data) => {
						$.each(data, (index, element) => {
								if (index === "status" && element === false){ window.location = window.location; }
						});
					},
					() => {}
				)},
				200
			);

		</script>
		</div>
		{% endif %}
		<!-- Bootstrap core JavaScript -->
		<!-- Placed at the start of the document so the pages load faster -->
		<script src="{{ request.META.PATH_INFO }}{% static "bootstrap/dist/js/bootstrap.min.js" %}"></script>


  </body>
</html>
